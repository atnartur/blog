---
title: Сводим все задачи в Google Calendar
date: 2018-02-18 18:52:57
tags:
    - Google
    - Wunderlist
    - Flow
    - Gitlab
    - Trello
category:
    - Софт
---

Во многих статьях о продуктивности пишут, что у человека всегда должен быть список дел, которые он должен сделат за день. Однако во время работы нередко происходит так, что личные задачи лежат в одном месте, корпоративные - в другом, задачи open source проекта (к примеру) - в третьем. Сегодня мы поговорим о том, как собрать единый список задач в Google Calendar автоматически и в каждый момент времени понимать свою повестку дня. <!--more-->

![](/content/2018/02/all-in-one-tasks/google-calendar-logo.jpg)

## Почему Google Calendar?

[Google сервисы отлично синхронизируются](/posts/2018/clouds/) с большинством платформ: iOS, MacOS, Android, даже WindowsPhone! На Windows 10 вроде тоже работала синхронизация, но я ее запускал очень давно, поэтому уверенно утверждать о том, что события адекватно придут на эту операционную систему от Microsoft, не буду.

С Google сервисами отлично интегрированы различные автоматизаторы типа [IFTTT](/posts/2017/univer-ifttt/) или [Zapier](http://zapier.com), поэтому в случае отсутствия готовых инструментов синхронизации, всегда можно попробовать накостылять что-то свое. А если даже таким образом решить проблему не получится, то для большинства популярных языков программирования есть модули, умеющие общаться с Google API.

Однако, не все так плохо, и далее Вы в этом убедитесь :)

## А почему календарь? Там же нет задач!

Задачи могут отображаться в календаре сверху как события на весь день. Таким образом, внизу будет график настоящих событий, а наверху будут все задачи. По-моему, это удобно:)

Есть только одна проблема: нет возможности редактировать информацию из внешних сервисов. Но я считаю, что в этом нет острой необходимости, потому что каждый описанный ниже сервис имеет много специфических функций, которые в любом случае не укладываются в интерфейс календаря. И ведь наша задача не сделать полнофункциональный агрегатор, а лишь просто собрать список задач в одном месте.

Еще одна важная особенность: в календаре появятся только те задачи, у которых есть крайний срок, иначе непонятно, в какое место календаря их добавлять.

## Внешние календари

Внешние календари подключаются с помощью ссылки. Добавление происходит с помощью кнопки "+", далее "Добавить по URL".

![](/content/2018/02/all-in-one-tasks/import.png)

Вставляем туда ссылку, нажимаем на "Добавить календарь". И готово!

Таким образом, внешние сервисы смогут доставлять к Вам список своих событий. Но так как календари все-таки внешние, Google по умолчанию не синхронизирует их. 

Чтобы включить синхронизацию, нужно перейти на [эту страницу](https://calendar.google.com/calendar/syncselect) и отметить галочками нужные для синхронизации календари.

## Подключение сервисов

### [Wunderlist](/posts/2013/wunderlist/)

Работает через подключение календаря по ссылке. 

1. [Заходим в веб-приложение](http://wunderlist.com)
2. Нажимаем на стрелочку рядом с именем
3. Далее "Параметры учетной записи"
4. Чуть ниже будет поле "Канал календаря" со ссылкой. Добавляем ссылку указанным выше способом, и задачи из Wunderlist появляются в Google Calendar!

### [Trelo](http://trello.com), [Todoist](http://todoist.com)

Для настройки нужно зарегистрироваться на [IFTTT](http://ifttt.com), подключить аккаунты Trello и Google Calendar и настроить соответствующую автоматизацию с помощью ссылок ниже. Частично процесс работы с этим сервисом описан [здесь](/posts/2017/univer-ifttt/).

- [Апплет для Trelo](https://ifttt.com/applets/299812p-when-you-create-a-new-trello-card-add-an-event-to-google-calendar). 
- [Апплет для Todoist](https://ifttt.com/connect/todoist/google_calendar)

### [Flow](http://getflow.com)

Flow также поддерживает синхронизацию календаря по ссылке. Подробная инструкция по настройке находится [здесь](https://www.getflow.com/support/tasks/calendar-sync). Нужно отметить, что указанных в статье настроек нет в бета-версии веб-приложения, поэтому нужно по-старинке заходить на http://app.getflow.com.

### [Gitlab](http://gitlab.com)

Let's hardcore started! Нету у них никакой поддержки экспорта крайних сроков issue. Можно попробовать сделать костыль на [Zappier](http://zapier.com), который умеет подключаться к обоим сервисам, но я не рискнул это сделать.

[На github есть проект](https://github.com/le1ca/gitlab-calendar), который умеет осуществлять синхронизацию через Webhook. Я дописал поддержку [Docker](/posts/2017/edu-open-data/), кому надо - [пользуйтесь](https://github.com/atnartur/gitlab-calendar/tree/feat_docker). Конечно же минус такого решения: придется заморачиваться с сервером. Но если у Вас нет проблем с этим, перейдем к настройке:

1. Переходим в [Google Developer Console](https://console.developers.google.com/iam-admin/serviceaccounts/)
2. Создаем проект
3. Создаем сервисный аккаунт
4. Создаем ключ сервисного аккаунта, скачиваем его и кладем в папку с проектом
5. С помощью верхнего поиска находим `Google Calendar API` и включаем его 
6. Отредактировать конфигурационный файл:
```json
{

    "logLevel": "INFO",

    "timezone": "Europe/Moscow",
    
    "googleSecretFile": "НАЗВАНИЕ ФАЙЛА ИЗ 4 ПУНКТА",
    "gitlabSecret":     "ЛЮБОЕ СЛУЧАЙНОЕ СЛОВО (БУДЕТ ИСПОЛЬЗОВАТЬСЯ ДЛЯ ПРОВЕРКИ ДОСТУПА)",
    
    "gitlabApi": {
        "enable": false,
        "url": "https://gitlab.com/",
        "token": "paste_impersonation_token_here",
        "inviteAssignees": true
    },
    
    "authorizedDomain": "your-gsuite-domain.net",
    
    "listenPort": 8080,
    
    "ssl": {
        "enable":   false,
        "keyfile":  "/etc/letsencrypt/live/domain_name/privkey.pem",
        "certfile": "/etc/letsencrypt/live/domain_name/fullchain.pem"
    },
    
    "repoMap": {
        "НАЗВАНИЕ РЕПОЗИТОРИЯ": "НАЗВАНИЕ КАЛЕНДАРЯ",
        "НАЗВАНИЕ РЕПОЗИТОРИЯ 2": "НАЗВАНИЕ КАЛЕНДАРЯ 2"
    },
    
    "dropPrivileges": {
        "enable": false,
        "user": "nobody",
        "group": "nobody"
    }
}
```

7. Выкладываем приложение gitlab-calendar на какой-нибудь сервер. Оно должно запуститься на порту `8080` (если Вы ничего не меняли)
8. Идем на http://gitlab.com
9. Открываем нужный проект, затем Settings / Integrations
10. Вставляем ссылку на работающее приложение
11. В Secret Token вставляем `ЛЮБОЕ СЛУЧАЙНОЕ СЛОВО`, которое Вы написали в конфигурационном файле в 6 пункте
12. Добавлем webhook
13. Готово (да, наконец-то)

Постарался описать все подробно, надеюсь, у Вас получится:)

Если инструкции по интеграции Вашего любимого сервиса тут нет, [напишите мне](http://i.atnartur.ru) или [дополните](http://github.com/atnartur/blog) статью самостоятельно.

Продуктивной Вам недели!:)
